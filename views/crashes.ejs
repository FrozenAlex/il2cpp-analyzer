<html>
<head>
<style>
html {
    background-color: #0d1117;
}

.main {
    display: grid;
    grid-template-rows: 1fr;
    height: 100%;
}

a {
    text-decoration: none;
}

a, ol {
    color: #ffa657;
}

a:hover {
    color: #cf8647;
}

</style>
</head>
<body>
    <div class="main">
        <ol id="crashes"></ol>
    </div>
</body>
<script>
    const ul = document.getElementById("crashes");
    const addCrash = (crash) => {
        const li = document.createElement("li");
        const a = document.createElement("a");
        a.setAttribute("href", "/crashes/" + crash.crashId);
        a.innerText = crash.crashId + " - " + new Date(crash.uploadDate).toLocaleString() + " - " + crash.userId;
        li.appendChild(a);
        ul.appendChild(li);
    }
    const fetchCrashes = async () => {
        try {
            ul.innerHTML = "";
            fetch("/api/crashes?limit=200")
            .then(response => response.json())
            .then(crashes => {
                crashes.forEach(crash => addCrash(crash));
            });
        } catch(err) {
            console.error("Error: " + err);
        }
    }
    fetchCrashes();
    setInterval(fetchCrashes, 60 * 1000);
</script>
</html>